<div class="absolute z-50 mt-1 w-full rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5">
  <ul class="max-h-60 overflow-auto py-1 text-base sm:text-sm" role="listbox">
    <% if @topics.any? %>
      <% @topics.each do |topic| %>
        <li class="group relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-gray-50">
          <%= link_to send("#{topic.route_key}_path", topic), class: "block" do %>
            <div class="flex items-center">
              <span class="font-medium block truncate"><%= topic.title %></span>
              <span class="ml-2 text-sm text-gray-500">
                (<%= abbreviate_part_of_speech(topic.part_of_speech) %>.)
              </span>
            </div>
            <% if topic.definitions.first %>
              <p class="mt-1 text-sm text-gray-500 truncate">
                <%= strip_tags(topic.definitions.first.content.to_plain_text).truncate(100) %>
              </p>
            <% end %>
          <% end %>
        </li>
      <% end %>
    <% elsif @query.present? %>
      <li class="relative cursor-default select-none py-2 pl-3 pr-9 text-gray-500">
        No results found for "<%= @query %>"
      </li>
    <% else %>
      <li class="relative cursor-default select-none py-2 pl-3 pr-9 text-gray-500">
        Start typing to search...
      </li>
    <% end %>
  </ul>
</div> 